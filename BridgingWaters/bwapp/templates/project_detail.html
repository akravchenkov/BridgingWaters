{% extends "base.html" %}

{% block page_title %}
Project #{{p.id}} - {{p.title}}
{% endblock %}

{% block more_scripts %}
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
{% endblock %}

{% block content %}
{% with loc=p.location_set.all|first comm_info=p.communityinfo_set.all|first geo_conds=p.geoconditions_set.all|first%}
<h2>
    {{p.title}}<br/>
    <span class="alt">{{loc.name}}, {{loc.state_prov}}, {{loc.country.name}}</span>
</h2>

<div class="span-9">
    
    <strong>Goal:</strong> {{p.goal}}<br/>    
    <strong>Project Type:</strong>
    <ul> 
        {% for t in p.proj_types.all %}
            <li><a href="#" title="See other {{t}} projects">{{t}}</a></li>
        {% endfor %}
    </ul>
    
    <strong>Project Duration:</strong> {{p.start_date}} - {{p.end_date}}<br/>
    <strong>People Served by Project:</strong> {{comm_info.num_ppl_served}}<br/>
    
    <strong>Summary:</strong> 
    {% if p.description|wordcount > 60 %} {# TODO: write javascript to toggle the more/less #}
        <span class="trunc">{{p.description|truncatewords:50}} </span>
        <span class="untrunc hide">{{p.description}} </span>
        <a href="#" class="trunc_show" title="View More">More</a>
    {% else %}    
        {{p.description}}
    {% endif %}
    <br/>
    
    {# TODO: Project Management description? #}

    <strong>Involved Organizations:</strong>
    <ul> 
        {% for org in p.organizations.all %}
            <li><a href="#" title="See other projects by {{org}}">{{org}}</a></li>
        {% empty %}
            (none listed)
        {% endfor %}
    </ul>

    <strong>Keywords:</strong>
    <ul> 
        {% for k in p.keywords.all %}
            <li><a href="#" title="See other projects tagged with &quote;{{k}}&quote;">{{k}}</a></li>
        {% empty %}
            (none listed)
        {% endfor %}
    </ul>
    
</div>
<div class="span-9 last">
    <img src="{{STATIC_URL}}images/SamoaPic.jpg" alt="TODO" title="TODO" />
</div>

<hr/>

<div class="span-9">
    <h3>Location Information</h3>
    {# TODO: Add links to country name and region to find other projects #}
    <strong>Location:</strong> {{loc.name}}, {{loc.state_prov}}, <a href="#" title="See other projects in {{loc.country.name}}">{{loc.country.name}}</a><br/>
    <strong>Region:</strong> <a href="#" title="See other projects in {{loc.region}}">{{loc.region}}</a><br/>
    <strong>Description:</strong> {{loc.description}}</br>
    <strong>Topography:</strong> {{loc.topography}}<br/>
    <strong>Elevation:</strong> {{loc.elevation}}<br/>
    <strong>Geographic Location:</strong> {{loc.latitude}}, {{loc.longitude}}<br/>
    
    TODO: Map showing location of project
    <div id="map" style="width: 340px; height: 200px"></div> 

    <script type="text/javascript"> 
        var myLatLng = new google.maps.LatLng({{loc.latitude}},{{loc.longitude}});
        var myOptions = {
            zoom: 8,
            center: myLatLng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(document.getElementById("map"), myOptions);

        var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            title: "{{loc.name}}"
        });
    </script> 
</div>
<div class="span-9 last">
    <h3>Community Information</h3>    
</div>

<hr/>

<div class="span-9">
    <h3>Geological Conditions</h3>
    <strong>Description:</strong> {{geo_conds.description}}<br/>
    <strong>Soil Type:</strong> {{geo_conds.soil_type}}<br/>
    <strong>Hit Bedrock:</strong> {{geo_conds.hit_bedrock|yesno:"Yes,No"}}<br/>
    <strong>Hit Water Table:</strong> {{geo_conds.hit_water_table|yesno:"Yes,No"}}<br/>
    <strong>Impact of Geological Conditions:</strong> {{geo_conds.geo_impact}}<br/> 
</div>
<div class="span-9 last">
    <h3>Materials and Labor</h3>

    <strong>Project Funder:</strong> TODO<br/>
    <strong>Labor Force:</strong> TODO<br/>
    <strong>Project Management:</strong> TODO<br/>
    <strong>Construction Resources:</strong> TODO<br/>
    <strong>Human Resources:</strong> TODO<br/>
    <strong>Retail Resources:</strong> TODO<br/>
    <strong>Available Technology:</strong> TODO<br/>
    <strong>Materials Used:</strong> TODO<br/>
    <strong>Materials Provider:</strong> TODO<br/>
</div>

<hr/>

<div class="column span-18 last">
    <h3>Post-Project Maintenance</h3>
    <p>TODO</p>
    <strong>Responsibilities:</strong> TODO<br/>
    <strong>Funding:</strong> TODO<br/>
</div>        
<hr/>
<div class="column span-18 last">
    <h3>Lessons Learned</h3>
    <p>TODO</p>
    <strong>Successes:</strong> TODO<br/>
    <strong>Obstacles:</strong> TODO<br/>
    <strong>Community Impact:</strong> TODO<br/>
</div>
<hr/>
<div class="column span-18 last">
    <h3>Educational Component</h3>
    <p>TODO</p>
</div>
{% endwith %}
{% endblock %}
